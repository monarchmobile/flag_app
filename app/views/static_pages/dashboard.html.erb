
<h1>My Dashboard</h1>
<%= flash[:notice] %>
<!-- 
<%= andrew("1)events/form => last line cannot click on.") %>
<%= andrew("2)dashboard#announcements => Iadded publish to site, pull from site, needs to be fitted into space") %>
<%= andrew("where should we puts links for someone to access profile, right now only link is in dashboard where only admin has access") %>
<%= rod("do backup image for user/show") %>
<%= rod("scrapbook/images => ability to shift image 90 degrees") %> -->





<div class="dashboard_container">
<h2>Pages</h2> 
<%= content_tag :p, link_to("+ New", new_page_path), class: "new_instance_button" %>
<ul class="model_table">
	<% @pages.each do |page| %>
		<li>
			<ul class="instance_detail">
				<%= content_tag :li, page.title, class: "title"  %>

				<%= form_for page, remote: true do |a| %>
					<%= a.select(:published, [["draft", false], ["published", true]]) %>
				<% end %>
				<% if page.published? %>
					<%= form_for page, remote: true do |a| %>
						<%= a.select(:position, 1..Page.find_all_by_published(true).count) %>
					<% end %>
				<% end %>
				
				<ul class="crud_buttons">
					<%= content_tag :li, link_to("edit", edit_page_path(page)) %>
					<%= content_tag :li, link_to("view", page_path(page)) %>
					<%= content_tag :li, link_to("delete", page_path(page), :confirm => "are you sure?", :method => :delete ) %>
				</ul>
			</ul>
			<br class="clear"/>
		</li>
	<% end %>
</ul>

<h2>Announcements</h2>
<%= content_tag :p, link_to("+ New", new_announcement_path), class: "new_instance_button" %>
<ul class="model_table">
	<% @announcements.each do |announcement| %>
		<li>
			<ul class="instance_detail">
				<%= content_tag :li, announcement.title, class: "title"  %>
				<%= form_for page, remote: true do |a| %>
					<%= a.select(:published, [["draft", false], ["published", true]]) %>	
				<% end %>
				<ul class="crud_buttons">
					<%= content_tag :li, link_to("edit", edit_announcement_path(announcement)) %>
					<%= content_tag :li, link_to("view", announcement_path(announcement)) %>
					<%= content_tag :li, link_to("delete", announcement_path(announcement), :confirm => "are you sure?", :method => :delete ) %>
					
				</ul>
				<%= content_tag :li, announcement.message, class: "message"  %>
				Publish to site:<%= content_tag :li, announcement.starts_at, class: "date" %>
				Pull from site:<%= content_tag :li, announcement.ends_at, class: "date" %>
				
			</ul>
			<br class="clear"/>
		</li>
	<% end %>
</ul>



<h2>Events</h2>
<%= content_tag :p, link_to("+ New", new_event_path), class: "new_instance_button" %>
<ul class="model_table">
	<% @events.each do |event| %>
		<li>
			<ul class="instance_detail">
				<%= content_tag :li, event.title, class: "title"  %>
				<%= content_tag :li, event.date %>
				<%= content_tag :li, event.location %>
				<%= content_tag :li, event.description, class: "message" %>
				<%= content_tag :li, event.publish_to_web, class: "date" %>
				<%= content_tag :li, event.pull_from_web, class: "date" %>
				<ul class="crud_buttons">
					<%= content_tag :li, link_to("edit", edit_event_path(event)) %>
					<%= content_tag :li, link_to("view", event_path(event)) %>
					<%= content_tag :li, link_to("delete", event_path(event), :confirm => "are you sure?", :method => :delete ) %>
					
				</ul>
				
			</ul>
			<br class="clear"/>
		</li>
	<% end %>
</ul>



<h2>Users waiting to be approved</h2>
<%= content_tag :p, @users.count, class: "user_count" %>
<ul class="model_table">
	<% if @users.count > 0 %>
		<% @users.each do |user| %>
			<li>
				<ul class="instance_detail">
					<%= content_tag :li, user.fullname, class: "title"  %>
					
					<ul class="crud_buttons">
						<%= content_tag :li, link_to("edit", edit_user_path(user)) %>
						<%= content_tag :li, link_to("show", user_path(user)) %>
						<%= content_tag :li, link_to("delete", user_path(user), :confirm => "are you sure?", :method => :delete ) %>
						
					</ul>
					
				</ul>
				<br class="clear"/>
			</li>
		<% end %>
	<% else %>
		<%= content_tag :p, "no users waiting to be approved" %>
	<% end %>
</ul>
</div>



