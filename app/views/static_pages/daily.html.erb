<h1>Scrapbook</h1>
<% if current_user %>
	<%= render ('shared/scrap_header') %>
	
<% end %>

	<ul>

	<% @days.uniq.sort.each do |d| %>
		<%= render 'shared/day', :d => d.strftime("%m-%d-%Y") %>
	<% end %>
	</ul>


	<!-- set up parameters for months array -->
	<% date = Date.today %>
	<% @date = date %>
	<% beg_month = date.beginning_of_month %>
	<% @beg_month = beg_month %>

	<% @prev_months = [] %>
	<% (1..12).each do |m| %>
	<%  @prev_months << beg_month.prev_month(m) %>
	<% end %>


	<!-- Current month with days on bottom, show when page is loaded -->
	<div class="month-of-year current_month" id="<%= beg_month.strftime('%b') %>">
	    <h2 id="month">
	        <a class="prev prev-next" data-date="<%= date.prev_month %>"><</a>
	        <% unless @prev_months[0] %>
	        	<a class="next prev-next" data-date="<%= date.next_month %>">></a>  
	        <% end %> 
	    </h2>
	    
	    
	    <ul class="dom_container">
	    <% (beg_month..date).each do |d| %>
	        <% if @user.images.find_by_date_taken(d) || @user.journals.find_by_entry_date(d) %>
	            <a href="#"><li class="days_of_month" style="background:#C8DAF1;" data-date="<%= d.strftime('%m-%d-%Y') %>" data-exists="yes"><%=  d.strftime("%d")  %></li></a>
	        <% else %>
	            <a href="#"><li class="days_of_month" data-date="<%= d.strftime('%m-%d-%Y') %>" data-exists="no"><%=  d.strftime("%d")  %></li></a>
	        <% end %>   
	    <% end %>
	    </ul>
	</div>

	<!-- scrolling through month array --> 
	<% @prev_months.each do |m| %>
		<div class="month-of-year" id="<%= m.strftime('%b') %>">
			<h2 id="month">
		        <a class="prev prev-next" data-date="<%= date.prev_month %>"><</a>
		        	<a class="next prev-next" data-date="<%= date.next_month %>">></a>   
		    </h2>
			
			<ul class="dom_container">
				<% (m..(m.next_month-1)).each do |d| %>
				 	<% if @user.images.find_by_date_taken(d) || @user.journals.find_by_entry_date(d) %>
				 		<a href="#"><li class="days_of_month" style="background:#C8DAF1;" data-date="<%= d.strftime('%m-%d-%Y') %>" data-exists="yes"><%=  d.strftime("%d")  %></li></a>
					<% else %>
						<a href="#"><li class="days_of_month" data-date="<%= d.strftime('%d') %>" data-exists="no"><%=  d.strftime("%d")  %></li></a>
					<% end %>	
				<% end %>
			</ul>
		</div>
	<% end %>
