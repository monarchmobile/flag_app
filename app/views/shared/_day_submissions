<ul>
<% @days.uniq.sort.each do |d| %>
	<div class="day_container" id="<%= d %>">
		
		<!-- <div class="scrapbook"><%= d %></div> -->
		<!-- Add a photo dropdown -->
		<% if @user.has_not_reached_daily_image_limit?(d) %>
			
			<li class="drop-image hot_form" >
				<a class="" href="#" >Add a photo<strong class="caret"></strong></a>
			</li>
			
		<% else %>
			<p>You have reached your daily upload limit.  In order to add new photos, you must delete one of the existing 5 below</p>
		<% end %>
		<!-- End photo dropdown -->

		<!-- Add a journal-entry dropdown -->
		<li class="drop-journal hot_form">
			<a class="" href="#" >Journal Entry<strong class="caret"></strong></a>
			
		</li> 
		<!-- End journal-entry dropdown -->

		<!-- photos_container -->
		<div class="photos_container">
			<% @images = @user.images.where(:date_taken => d) %>
			<% for image in @images do %>
				<li>
				<div class="image_container">
					<%= image_tag image.image_url, width:175, height:175 %>
					<%= content_tag :h3, image.title %>
					<%= content_tag :p, image.content, class: "image_content" %>
					<div class="actions">					
					<%= link_to image_tag("delete.png", width: 15, height: 15), [@user, image ], :confirm => 'Are you sure?', :method => :delete, class: "image_X" %>
					<%= link_to "Edit", [:edit, @user, image] %>
					</div>
				</div>
				</li>
			<% end %>
		</div>
		

		<!-- journal_container -->
		<div class="journal_container">
			<% @entries = @user.journals.where(:entry_date => d) %>
			<% for entry in @entries do %>
				
				<div class="journal_entry">
					<%= content_tag :p, entry.content %>
									
					<%= link_to image_tag("delete.png", width: 15, height: 15), [@user, entry ], :confirm => 'Are you sure?', :method => :delete, class: "scrap_image_X" %>
					<%= link_to "Edit", [:edit, @user, entry] %>
				</div>
				
			<% end %>
		</div>
		
	</div>
<% end %>
</ul>


<!-- set up parameters for months array -->
<% date = Date.today %>
<% @date = date %>
<% beg_month = date.beginning_of_month %>
<% @beg_month = beg_month %>

<% @prev_months = [] %>
<% (1..12).each do |m| %>
<%  @prev_months << beg_month.prev_month(m) %>
<% end %>


<!-- Current month with days on bottom, show when page is loaded -->
<div class="month-of-year current_month" id="<%= beg_month.strftime('%b') %>">
    <h2 id="month">
        <a class="prev prev-next" data-date="<%= date.prev_month %>"><</a>
        <% unless @prev_months[0] %>
        	<a class="next prev-next" data-date="<%= date.next_month %>">></a>  
        <% end %> 
    </h2>
    
    
    <ul class="dom_container">
    <% (beg_month..date).each do |d| %>
        <% if @user.images.find_by_date_taken(d) || @user.journals.find_by_entry_date(d) %>
            <a href="#"><li class="days_of_month" style="background:#C8DAF1;" data-date="<%= d.strftime('%m-%d-%Y') %>" data-exists="yes"><%=  d.strftime("%d")  %></li></a>
        <% else %>
            <a href="#"><li class="days_of_month" data-date="<%= d.strftime('%m-%d-%Y') %>" data-exists="no"><%=  d.strftime("%d")  %></li></a>
        <% end %>   
    <% end %>
    </ul>
</div>

<!-- scrolling through month array --> 
<% @prev_months.each do |m| %>
<div class="month-of-year" id="<%= m.strftime('%b') %>">
	<h2 id="month">
        <a class="prev prev-next" data-date="<%= date.prev_month %>"><</a>
        	<a class="next prev-next" data-date="<%= date.next_month %>">></a>   
    </h2>
	
	<ul class="dom_container">
		<% (m..(m.next_month-1)).each do |d| %>
		 	<% if @user.images.find_by_date_taken(d) || @user.journals.find_by_entry_date(d) %>
		 		<a href="#"><li class="days_of_month" style="background:#C8DAF1;" data-date="<%= d.strftime('%m-%d-%Y') %>" data-exists="yes"><%=  d.strftime("%d")  %></li></a>
			<% else %>
				<a href="#"><li class="days_of_month" data-date="<%= d.strftime('%d') %>" data-exists="no"><%=  d.strftime("%d")  %></li></a>
			<% end %>	
		<% end %>
	</ul>
</div>
<% end %>