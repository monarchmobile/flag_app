<%= render('shared/time_calc', beg_range: @beg_range) %>
<%= render ('shared/scrap_header') %>
<% @bread_crumb = @beg_range %>
<%= render('javascript/image') %>

<%= link_to content_tag(:div, "Go To Week", class: "nav_up"), weekly_scrapbook_path(beg_range: @beg_range_week, end_range: @end_range_week, bread_crumb: @bread_crumb) %>

<% image_num = 0 %>
<div class="test3"></div>
<% @user_images.each do |image| %>
<!-- render out each image -->
	<!-- calculates which which image belongs to -->
	<% num = image.date_taken.strftime("%d").to_i/7 %>
	<% beg_week = image.date_taken.beginning_of_month+num.weeks %>
	<% end_week = beg_week+6.days %>
	<!-- end calculate-->
	
	<li>
		<div class="image_container image_position thumbnail" id="image_<%= image_num += 1 %>">
			<%= link_to image_tag(image.image_url, title: image.title, alt: image.title), image.image_url, title: image.title %>
			
			<div class="actions">	
				<div class="gallery_msg">				
				<% if image.week == false %>
					<%= form_for [@user, image], remote: true do |f| %>
					  <%= f.check_box :week %>
					  Add to your week
					<% end %>
					
				<% elsif image.week == true %>
					<%= link_to content_tag(:div, "Part of weekly Gallery"), weekly_scrapbook_path(beg_range: beg_week, end_week: end_week) %>
				<% end %>
				</div>	
				<%= render('shared/edit_delete_image_container', :image => image) %>	
			</div>
		</div>
	</li>
	 <p id="large"></p>
<% end %>


<div id="journal_form">
 	
</div> <br /> 	
Link_to Add an entry: <%= link_to "Add an entry", [:new, @user, :journal], remote: true %><br /> 

	
	<!-- journal_container -->
<div id="journal_container">
<%= render('shared/journal_container') %>
</div>

<div class="nav_arrows">
	<div class="prev prev-next direction">
	    <%= link_to content_tag(:div,"prev", class: "prev_btn"), daily_scrapbook_path(beg_range: @beg_range.to_date-1, end_range: @beg_range.to_date-1), remote: true %>
	</div>
	<div class="next prev-next direction">
	    <%= link_to content_tag(:div,"next", class: "next_btn"), daily_scrapbook_path(beg_range: @beg_range.to_date+1, end_range: @beg_range.to_date+1), remote: true %>
	</div>
</div>
<div id="time_navigation">
	<ul class="dom_container">
		
		
		<% (@beg_range.to_date.beginning_of_month..@beg_range.to_date.end_of_month).each do |day| %>
			<!--  Pointer : add pointer class -->
			<% if @beg_range.to_date == day %>
				
				<% if @user.images.where(date_taken: day..day).any? %>
					<%= link_to content_tag(:li, day.strftime("%d"), class: "days_of_month clickable_dates content_exists pointer"), daily_scrapbook_path(beg_range: day, end_range: day), remote: true %>
				<% else %>
					<%= link_to content_tag(:li, day.strftime("%d"), class: "days_of_month clickable_dates pointer"), daily_scrapbook_path(beg_range: day, end_range: day), remote: true %>

				<% end %>
			<!--  Future days : add future_date class  -->	
			<% elsif Date.today < day %>
					<%= link_to content_tag(:li, day.strftime("%d"), class: "days_of_month clickable_dates future_date"), daily_scrapbook_path(beg_range: day, end_range: day), remote: true %>
			<!--  Future days : no extra classes  -->	
			<% else %>
				<% if @user.images.where(date_taken: day..day).any? %>
					<%= link_to content_tag(:li, day.strftime("%d"), class: "days_of_month clickable_dates content_exists"), daily_scrapbook_path(beg_range: day, end_range: day), remote: true %>
				<% else %>
					<%= link_to content_tag(:li, day.strftime("%d"), class: "days_of_month clickable_dates"), daily_scrapbook_path(beg_range: day, end_range: day), remote: true %>

				<% end %>
			<% end %>
		<% end %>
		
	</ul>

	<%= render('menus/by_week', :beg_month => @first_of_month ) %>

	<%= render('menus/by_month', :beg_range => @first_of_month ) %>
</div>