<% @beg_range = @beg_range.to_date %>
<% @end_range = @end_range.to_date %>
<% @resource_m = request.path.split('/')[1] %>


<!-- month Calculations -->
<!-- get range to go back to week -->




<!-- Week: if breadcrumb, then goes back to breadcrumb -->
<% if @resource_m == "weekly_scrapbook" %>
	<% if @bread_crumb %>
		<% @originating_day_beg = @bread_crumb %>
	<% else %>
		<% @originating_day_beg = @beg_range %>
	<% end %>
<% end %>
<% if @resource_m == "monthly_scrapbook" %>
	<% if @bread_crumb %>
		<% @originating_week_beg = @bread_crumb %>
		<% @originating_week_end = @bread_crumb.to_date+6.days %>
	<% else %>
		<% @originating_week_beg = @beg_range %>
		<% @originating_week_end = @beg_range.to_date+6.days %>
	<% end %>
<% end %>
<% if @resource_m == "yearly_scrapbook" %>
	<% if @bread_crumb %>
		<% @originating_month_beg = @bread_crumb %>
		<% @originating_month_end = @bread_crumb.to_date.end_of_month %>
	<% else %>
		<% @originating_month_beg = @beg_range %>
		<% @originating_month_end = @begin_range.to_date.end_of_month %>
	<% end %>
<% end %>

<!-- day Calculations -->
	<!-- finding which week day belongs to -->
<% num = (@beg_range.strftime("%d").to_i-1)/7 %>
<% @beg_range_week = @beg_range.beginning_of_month+num.weeks %>
<% @end_range_week = @beg_range.beginning_of_month+num.weeks+6.days %>

<!-- week Calculations -->

<% @first_of_month = @beg_range.to_date.beginning_of_month %>
<% @last_of_month = @beg_range.to_date.beginning_of_month.next_month-1 %>

<% if (@end_range+7).between?(@first_of_month, @last_of_month) %>
	<% if @beg_range.between?(@beg_range.prev_month.end_of_month, @beg_range.beginning_of_month+1) %>
		<!--1st Week-->
		<% @beg_of_prev_week = @beg_range.prev_month.beginning_of_month + 4.weeks %>
		<% @end_of_prev_week = @end_range.prev_month.end_of_month %>
		
		<% @beg_of_next_week = @beg_range+7.days %>
		<% @end_of_next_week = @end_range+7.days %>
	<% else %>
		<!--Middle Weeks-->
		<% @beg_of_prev_week = @beg_range-7.days %>
		<% @end_of_prev_week = @end_range-7.days %>
		
		<% @beg_of_next_week = @beg_range+7.days %>
		<% @end_of_next_week = @end_range+7.days %>
	<% end %>
<% elsif %>
	<% if @beg_range.next_week.beginning_of_week.between?(@first_of_month, @last_of_month) %>
		<!--4th Week-->
		<% @beg_of_prev_week = @beg_range-7.days %>
		<% @end_of_prev_week = @end_range-7.days %>
		
		<% @beg_of_next_week = @beg_range+7.days %>
		<% @end_of_next_week = @end_range.end_of_month %>	
	<% else %>
		<!--5th Week-->
		<% @beg_of_prev_week = @beg_range-7.days %>
		<% @end_of_prev_week = @end_range-2.days %>
		
		<% @beg_of_next_week = @beg_range.next_month.beginning_of_month %>
		<% @end_of_next_week = @end_range.next_week.beginning_of_month+6.days %>
	<% end %>
<% end %>

